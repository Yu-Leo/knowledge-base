# Как верифицировать коммиты в git при помощи gpg

* Статья на Techrocks: [Подпись коммитов в Git: как и зачем это делать](https://techrocks.ru/2021/06/14/commit-signing-in-git/)

## 1. Генирируем пару ключей

[Мой туториал по gpg](./README.md)

```
gpg --full-gen-key
```

1. Вводим `1` (тип ключа "RSA and RSA")
2. В качестве размера ключа указываем `4096`. Это минимальный размер для GitHub и GitLab и максимальный размер, который GPG позволяет сгенерировать.
3. Сколько должен прослужить ключ, вы определяете самостоятельно. Значение по умолчанию — 0 (срок действия не истекает никогда).
4. Подтверждаем указанные данные, введя `y`.



## 2. Добавляем ключ в gitconfig
```
git config --global user.signingkey C6656513A0F9B7B7F4E76389EF39187D04795745
```

## 3. Включаем автоподпись всех коммитов (по желанию)

Чтобы включить подпись всех коммитов, устанавливаем параметр `commit.gpgsign` с помощью git config. Это заставит `git commit` подписывать коммиты по умолчанию.

```
git config --global commit.gpgsign true
```

Если данная опиция не активна, подпись каждого коммита можно производить вручную, добавляя `-s` при `git commit`

## 4. Добавление публичного ключа на GitHub

### 4.1 Экспприруем публичный ключ в ASCII формате в файл 

```
gpg --export --armor C6656513A0F9B7B7F4E76389EF39187D04795745 > ./gpg-key.pub
```

### 4.2 Добавляем ключ на GitHub.com

На GitHub заходим в свои настройки, в раздел **"SSH and GPG keys"**, и нажимаем **"New GPG key"**.

Вставляем содержимое `gpg-key.pub` в поле **"Key"** и нажимаем **"Add GPG key"**.
