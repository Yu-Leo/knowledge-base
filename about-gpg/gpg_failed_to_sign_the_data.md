# Ошибка git - gpg не смог подписать данные

## :question: Вопрос

Я только начал использовать git и установил git и gpg через homebrew. По какой-то причине я получаю эту ошибку, когда делаю git commit Я просмотрел так много других вопросов по stackoverflow по этой теме, и ни один из них не помог мне. Как я могу исправить эту ошибку, чтобы я мог успешно загрузить.
```
error: gpg failed to sign the data
fatal: failed to write commit object
```

## :heavy_check_mark: Ответ

Для устранения неполадок сначала попробуйте две вещи:

* запустите `git config --global gpg.program gpg2`, чтобы убедиться, что git использует `gpg2`, а не `gpg`
* запустите `echo "test" | gpg2 --clearsign`, чтобы убедиться, что сам `gpg2` работает

Если все в порядке, можно попробовать следующее:

* запустите `brew install pinentry`, чтобы убедиться, что у вас установлен хороший инструмент для ввода парольной фразы

Если после этой установки вы снова попробуете `git commit` и по-прежнему получите ошибку "`failed to sign the data`":

* запустите `gpgconf --kill gpg-agent`, чтобы убить любой работающий агент, который может зависнуть

Если это говорит о том, что `gpgconf` не установлен или не имеет опции `--kill`, вы можете попробовать следующее:

* `cp ~/.gnupg ~/.gnupg-GOOD`, чтобы сохранить копию вашего `~/.gnupg`, чтобы вернуться к ней позже, если потребуется

* `brew install gnupg21` для установки GnuPG 2.1

Причина сохранения копии вашего каталога `~/.gnupg` заключается в том, что GnuPG 2.1 потенциально создает / изменяет некоторые ключевые данные способом, который не имеет обратной совместимости с GnuPG 2.0 и более ранними версиями, поэтому если вы хотите вернуться позже, вы можете сделать `mv ~/.gnupg ~/.gnupg21 && mv ~/.gnupg-GOOD ~/.gnupg`.

<hr>

В противном случае необходимо выполнить несколько основных шагов, чтобы убедиться, что у вас есть рабочая среда GnuPG:

* запустите `gpg2 -K --keyid-format SHORT`, чтобы убедиться, что у вас есть хотя бы одна пара ключей

Если вывод показывает, что у вас нет секретного ключа для использования GnuPG, вам необходимо его создать:

* запустите `gpg2 --gen-key`, чтобы GnuPG провел вас через шаги по созданию пары ключей

<hr>

Если вы получили сообщение об ошибке «Неподходящий ioctl для устройства» , сделайте следующее:

* запустите `export GPG_TTY=$(tty)` и / или добавьте это в свой `~/.bashrc` или `~/.bash_profile`

[Источник](https://question-it.com/questions/1154214/oshibka-git-gpg-ne-smog-podpisat-dannye)
