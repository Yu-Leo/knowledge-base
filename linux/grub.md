# Восстановление GRUB

Источник: [статья](https://help.ubuntu.ru/wiki/%D0%B2%D0%BE%D1%81%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_grub)

## Мой сценарий
1. Установка `.iso` образа Manjaro Linux на флешку
2. Загрузка с этой флешки в Live-режиме **(с ноута, к которому подключен диск с основной системой)**
3. Установка Manjaro Linux на другую флешку/внешний диск
4. Система с основного диска не загружется, т. к. на ней сломался GRUB. Открывается интерфейс консоли GRUB (rescue mode)

## Решение проблемы
0. Не боимся консоли GRUB
1. Выполняем команду
    ```bash
    ls
    ```
    В ответ она выведет, например, следующее:
    ```bash
    (hd0) (hd0,msdos3) (hd0,msdos2) (hd0,msdos1) (hd1) (hd1,msdos2) (hd1,msdos1)
    ```
    Нужно угадать раздел, на котором установлена система. Для этого можно просто перебрать все
2. Выполняем команды
    ```bash
    set prefix=(hd0,1)/boot/grub 
    set root=(hd0,1)
    ```
    Этими командами мы указываем использовать диск `(hd0,1)` для дальнейших команд.
    
    **Важно: без лишних пробелов!**
3. Проверяем, действительно ли на этом разделе есть то, что нам нужно
    ```bash
    ls /boot/grub
    ```
    Eсли в ответ получаем список всех файлов в этой директории, то диск и раздел выбраны правильно.
4. Подгружаем модули
    ```bash
    insmod ext2
    insmod normal
    ```
5. Запускаем GRUB
    ```bash
    normal
    ```
6. Загружемся в основную систему и выполняем команду
    ```bash
    sudo grub-install /dev/sdX
    ```
    Где `sdX` - диск, на который нужно установить GRUB. 
